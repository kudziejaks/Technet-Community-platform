<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin - Econet e-Novate 2025</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@2/dist/email.min.js"></script>
<style>
body { margin:0; font-family:'Roboto',sans-serif; color:#fff; 
background:url('https://images.unsplash.com/photo-1605902711622-8e3dc6b7d8e0?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&q=80&w=1080') center/cover no-repeat; }
header { background: rgba(0,0,0,0.6); padding:20px; text-align:center; }
header h1 { margin:0; color:#00ffff; text-shadow:0 0 10px #00ffff; }
nav { display:flex; justify-content:center; gap:15px; flex-wrap:wrap; margin-top:10px; }
nav a { color:#00ffff; text-decoration:none; font-weight:700; padding:5px 10px; border-radius:5px; transition:0.3s; }
nav a:hover { background:#00ffff; color:#000; }
section { padding:50px; max-width:1200px; margin:auto; background: rgba(0,0,0,0.6); border-radius:10px; }
table { width:100%; border-collapse:collapse; margin-top:20px; background: rgba(0,0,0,0.7); }
th, td { border:1px solid #00ffff; padding:10px; text-align:center; }
button { padding:5px 10px; border:none; border-radius:5px; background:#00ffff; color:#000; font-weight:700; cursor:pointer; margin:2px; transition:0.3s; }
button.accept { background:#00ff00; color:#000; }
button.deny { background:#ff0000; color:#fff; }
textarea { width:100%; padding:10px; margin-top:10px; border-radius:5px; border:none; }
h2 { color:#00ffff; text-align:center; }
</style>
</head>
<body>

<header>
<h1>Admin Dashboard</h1>
<nav>
<a href="index.html">Home</a>
<a href="signup.html">Join Expo</a>
<a href="speakers.html">Speakers</a>
<a href="schedule.html">Schedule</a>
<a href="exhibitors.html">Exhibitors</a>
<a href="community.html">Community</a>
<a href="admin.html">Admin</a>
</nav>
</header>

<section>
<h2>RSVP Management</h2>
<table id="adminRSVPs">
<tr><th>Name</th><th>Email</th><th>Status</th><th>Action</th></tr>
</table>

<h2>Attendance Overview</h2>
<p id="attendanceOverview">Day 1: 0 | Day 2: 0 | Day 3: 0 | Total: 0</p>

<h2>Send Announcement</h2>
<textarea id="adminMessage" placeholder="Type message here"></textarea>
<button onclick="sendAnnouncement()">Send Email</button>
</section>

<script>
emailjs.init("yOwYpcXjeLqxfopJb");

let rsvps = [];

function updateAdminTable(){
    const table = document.getElementById('adminRSVPs');
    table.innerHTML = '<tr><th>Name</th><th>Email</th><th>Status</th><th>Action</th></tr>';
    rsvps.forEach((rsvp,index)=>{
        const row = table.insertRow();
        row.insertCell(0).innerText = rsvp.name;
        row.insertCell(1).innerText = rsvp.email;
        row.insertCell(2).innerText = rsvp.status;
        const actionCell = row.insertCell(3);
        const acceptBtn = document.createElement('button');
        acceptBtn.innerText = "Accept";
        acceptBtn.className = "accept";
        acceptBtn.onclick = ()=>{ rsvps[index].status="Accepted"; updateAdminTable(); updateAttendance(); };
        const denyBtn = document.createElement('button');
        denyBtn.innerText = "Deny";
        denyBtn.className = "deny";
        denyBtn.onclick = ()=>{ rsvps[index].status="Denied"; updateAdminTable(); updateAttendance(); };
        actionCell.appendChild(acceptBtn);
        actionCell.appendChild(denyBtn);
    });
}

function updateAttendance(){
    const day1 = rsvps.filter(r=>r.status==="Accepted" && r.days.includes("Day 1")).length;
    const day2 = rsvps.filter(r=>r.status==="Accepted" && r.days.includes("Day 2")).length;
    const day3 = rsvps.filter(r=>r.status==="Accepted" && r.days.includes("Day 3")).length;
    const total = day1+day2+day3;
    document.getElementById('attendanceOverview').innerText = `Day 1: ${day1} | Day 2: ${day2} | Day 3: ${day3} | Total: ${total}`;
}

function sendAnnouncement(){
    const message = document.getElementById('adminMessage').value;
    if(message){
        rsvps.forEach(r=>{
            if(r.status==="Accepted"){
                emailjs.send("service_n6q8s1o","_f4jj28d",{
                    from_name:"Econet e-Novate Expo Admin",
                    to_email:r.email,
                    message:message
                });
            }
        });
        alert("Announcement sent to all accepted attendees!");
        document.getElementById('adminMessage').value="";
    } else alert("Type a message first.");
}
</script>
</body>
</html>
