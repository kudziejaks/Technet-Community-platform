const form = document.getElementById('community-form');
const postsDiv = document.getElementById('posts');

form.addEventListener('submit', function(e){
    e.preventDefault();

    const postData = {
        name: form.name.value,
        email: form.email.value,
        project: form.project.value,
        status: form.status.value,
        collaboration: form.collaboration.value
    };

    // Display post on page with clickable email
    const postEl = document.createElement('div');
    postEl.className = 'post';
    postEl.innerHTML = `
        <h4>${postData.name} - ${postData.project}</h4>
        <p>${postData.status}</p>
        <p><strong>Open to Collaboration:</strong> ${postData.collaboration}</p>
        <p><strong>Contact:</strong> <a href="mailto:${postData.email}">${postData.email}</a></p>
    `;
    postsDiv.prepend(postEl);

    // Send via EmailJS
    emailjs.send('service_n6q8s1o', 'template_f4jj28d', postData)
    .then(() => {
        console.log('Post submitted via EmailJS');
    }, (err) => {
        console.error('Error sending post', err);
    });

    form.reset();
});
